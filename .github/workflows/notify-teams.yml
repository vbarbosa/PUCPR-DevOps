name: Notify Teams

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Adaptive Card
        run: |
          curl -H 'Content-Type: application/json' \
               -d '{
                     "type": "message",
                     "attachments": [
                       {
                         "contentType": "application/vnd.microsoft.card.adaptive",
                         "content": {
                           "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
                           "type": "AdaptiveCard",
                           "version": "1.4",
                           "body": [
                             {
                               "type": "TextBlock",
                               "text": "ðŸš€ Commit em '"$GITHUB_REPOSITORY"' por '"$GITHUB_ACTOR"'",
                               "wrap": true
                             },
                             {
                               "type": "TextBlock",
                               "text": "Commit: '"$GITHUB_SHA"'",
                               "wrap": true
                             }
                           ]
                         }
                       }
                     ]
                   }' \
               ${{ secrets.TEAMS_WEBHOOK_URL }}
